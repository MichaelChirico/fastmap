<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a fastmap object — fastmap • fastmap</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Create a fastmap object — fastmap" />

<meta property="og:description" content="A fastmap object provides a key-value store where the keys are strings and
the values are any R objects." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fastmap</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/fastmap">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a fastmap object</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/fastmap/blob/master/R/fastmap.R'><code>R/fastmap.R</code></a></small>
    <div class="hidden name"><code>fastmap.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>A fastmap object provides a key-value store where the keys are strings and
the values are any R objects.</p>
    
    </div>

    <pre class="usage"><span class='fu'>fastmap</span>(<span class='kw'>missing_default</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>missing_default</th>
      <td><p>The value to return when <code><a href='https://www.rdocumentation.org/packages/base/topics/get'>get()</a></code> is called with a
key that is not in the map. The default is <code>NULL</code>, but in some cases
it can be useful to return a sentinel value, such as a
<code><a href='key_missing.html'>key_missing</a></code> object.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>In R, it is common to use environments as key-value stores, but they can leak
memory: every time a new key is used, R registers it in its global symbol
table, which only grows and is never garbage collected. If many different
keys are used, this can cause a non-trivial amount of memory leakage.</p>
<p>Fastmap objects do not use the symbol table and do not leak memory.</p>
<p>Unlike with environments, the keys in a fastmap are always encoded as UTF-8,
so if you call <code>$set()</code> with two different strings that have the same
Unicode values but have different encodings, the second call will overwrite
the first value. If you call <code>$keys()</code>, it will return UTF-8 encoded
strings, and similarly, <code>$as_list()</code> will return a list with names that
have UTF-8 encoding.</p>
<p>Note that if you call <code>$mset()</code> with a named argument, where the name is
non-ASCII, R will convert the name to the native encoding before fastmap has
the chance to convert them to UTF-8, and the keys may get mangled in the
process. However, if you use <code>$mset(.list = x)</code>, then R will not convert
the keys to the native encoding, and the keys will be correctly converted to
UTF-8. With <code>$mget()</code>, the keys will be converted to UTF-8 before they
are fetched.</p>
<p>Fastmap objects have the following methods:</p>
<dl class='dl-horizontal'>
  <dt><code>set(key, value)</code></dt><dd><p>Set a key-value pair. <code>key</code> must be a string. Returns <code>value</code>.</p></dd>
  <dt><code>mset(..., .list = NULL)</code></dt><dd><p>Set multiple key-value pairs. The key-value pairs are named arguments,
    and/or a list passed in as <code>.list</code>. Returns a named list where the
    names are the keys, and the values are the values.</p></dd>
  <dt><code><a href='https://www.rdocumentation.org/packages/base/topics/get'>get(key, missing = missing_default)</a></code></dt><dd><p>Get a value corresponding to <code>key</code>. If the key is not in the map,
    return <code>missing</code>.</p></dd>
  <dt><code><a href='https://www.rdocumentation.org/packages/base/topics/get'>mget(keys, missing = missing_default)</a></code></dt><dd><p>Get values corresponding to <code>keys</code>, which is a character vector. The
    values will be returned in a named list where the names are the same as
    the <code>keys</code> passed in, in the same order. For keys not in the map,
    they will have <code>missing</code> for their value.</p></dd>
  <dt><code>has(keys)</code></dt><dd><p>Given a vector of keys, returns a logical vector reporting whether each
    key is contained in the map.</p></dd>
  <dt><code><a href='https://www.rdocumentation.org/packages/base/topics/rm'>remove(keys)</a></code></dt><dd><p>Given a vector of keys, remove the key-value pairs from the map. Returns
    a logical vector reporting whether each item existed in (and was removed
    from) the map.</p></dd>
  <dt><code>keys()</code></dt><dd><p>Returns a character vector of all the keys, in arbitrary order. Note that
    the order can vary across platforms and is not guaranteed to be
    consistent.</p></dd>
  <dt><code>size()</code></dt><dd><p>Returns the number of items in the map.</p></dd>
  <dt><code>as_list()</code></dt><dd><p>Return a named list where the names are the keys from the map, and the
    values are the values, in arbitrary order. Note that the order can vary
    across platforms and is not guaranteed to be consistent.</p></dd>
  <dt><code>reset()</code></dt><dd><p>Reset the fastmap object, clearing all items.</p></dd>
</dl>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Create the fastmap object</span>
<span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'>fastmap</span>()

<span class='co'># Set some key-value pairs</span>
<span class='no'>m</span>$<span class='fu'>set</span>(<span class='st'>"x"</span>, <span class='fl'>100</span>)
<span class='no'>m</span>$<span class='fu'>set</span>(<span class='st'>"letters"</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>, <span class='st'>"c"</span>))
<span class='no'>m</span>$<span class='fu'>mset</span>(<span class='kw'>numbers</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>10</span>, <span class='fl'>20</span>, <span class='fl'>30</span>), <span class='kw'>nothing</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='co'># Get values using keys</span>
<span class='no'>m</span>$<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/get'>get</a></span>(<span class='st'>"x"</span>)</div><div class='output co'>#&gt; [1] 100</div><div class='input'><span class='no'>m</span>$<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/get'>get</a></span>(<span class='st'>"numbers"</span>)</div><div class='output co'>#&gt; [1] 10 20 30</div><div class='input'><span class='no'>m</span>$<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/get'>mget</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"letters"</span>, <span class='st'>"numbers"</span>))</div><div class='output co'>#&gt; $letters
#&gt; [1] "a" "b" "c"
#&gt; 
#&gt; $numbers
#&gt; [1] 10 20 30
#&gt; </div><div class='input'>
<span class='co'># Missing keys return NULL by default, but this can be customized</span>
<span class='no'>m</span>$<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/get'>get</a></span>(<span class='st'>"xyz"</span>)</div><div class='output co'>#&gt; NULL</div><div class='input'>
<span class='co'># Check for existence of keys</span>
<span class='no'>m</span>$<span class='fu'>has</span>(<span class='st'>"x"</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='no'>m</span>$<span class='fu'>has</span>(<span class='st'>"nothing"</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='no'>m</span>$<span class='fu'>has</span>(<span class='st'>"xyz"</span>)</div><div class='output co'>#&gt; [1] FALSE</div><div class='input'>
<span class='co'># Remove one or more items</span>
<span class='no'>m</span>$<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/rm'>remove</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"letters"</span>, <span class='st'>"x"</span>))

<span class='co'># Return number of items</span>
<span class='no'>m</span>$<span class='fu'>size</span>()</div><div class='output co'>#&gt; [1] 2</div><div class='input'>
<span class='co'># Get all keys</span>
<span class='no'>m</span>$<span class='fu'>keys</span>()</div><div class='output co'>#&gt; [1] "numbers" "nothing"</div><div class='input'>
<span class='co'># Return named list that represents all key-value pairs</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>m</span>$<span class='fu'>as_list</span>())</div><div class='output co'>#&gt; List of 2
#&gt;  $ numbers: num [1:3] 10 20 30
#&gt;  $ nothing: NULL</div><div class='input'>
<span class='co'># Clear the map</span>
<span class='no'>m</span>$<span class='fu'>reset</span>()


<span class='co'># Specify missing value when get() is called</span>
<span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'>fastmap</span>()
<span class='no'>m</span>$<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/get'>get</a></span>(<span class='st'>"x"</span>, <span class='kw'>missing</span> <span class='kw'>=</span> <span class='fu'><a href='key_missing.html'>key_missing</a></span>())</div><div class='output co'>#&gt; &lt;Key Missing&gt;</div><div class='input'><span class='co'>#&gt; &lt;Key Missing&gt;</span>

<span class='co'># Specify the default missing value</span>
<span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'>fastmap</span>(<span class='kw'>missing_default</span> <span class='kw'>=</span> <span class='fu'><a href='key_missing.html'>key_missing</a></span>())
<span class='no'>m</span>$<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/get'>get</a></span>(<span class='st'>"x"</span>)</div><div class='output co'>#&gt; &lt;Key Missing&gt;</div><div class='input'>#> <Key Missing>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Winston Chang, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

