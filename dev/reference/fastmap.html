<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a fastmap object — fastmap • fastmap</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a fastmap object — fastmap"><meta property="og:description" content="A fastmap object provides a key-value store where the keys are strings and
the values are any R objects."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fastmap</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/r-lib/fastmap/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a fastmap object</h1>
    <small class="dont-index">Source: <a href="https://github.com/r-lib/fastmap/blob/HEAD/R/fastmap.R" class="external-link"><code>R/fastmap.R</code></a></small>
    <div class="hidden name"><code>fastmap.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A fastmap object provides a key-value store where the keys are strings and
the values are any R objects.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fastmap</span><span class="op">(</span>missing_default <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>missing_default</dt>
<dd><p>The value to return when <code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code> is called with a
key that is not in the map. The default is <code>NULL</code>, but in some cases
it can be useful to return a sentinel value, such as a
<code><a href="key_missing.html">key_missing</a></code> object.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>In R, it is common to use environments as key-value stores, but they can leak
memory: every time a new key is used, R registers it in its global symbol
table, which only grows and is never garbage collected. If many different
keys are used, this can cause a non-trivial amount of memory leakage.</p>
<p>Fastmap objects do not use the symbol table and do not leak memory.</p>
<p>Unlike with environments, the keys in a fastmap are always encoded as UTF-8,
so if you call <code>$set()</code> with two different strings that have the same
Unicode values but have different encodings, the second call will overwrite
the first value. If you call <code>$keys()</code>, it will return UTF-8 encoded
strings, and similarly, <code>$as_list()</code> will return a list with names that
have UTF-8 encoding.</p>
<p>Note that if you call <code>$mset()</code> with a named argument, where the name is
non-ASCII, R will convert the name to the native encoding before fastmap has
the chance to convert them to UTF-8, and the keys may get mangled in the
process. However, if you use <code>$mset(.list = x)</code>, then R will not convert
the keys to the native encoding, and the keys will be correctly converted to
UTF-8. With <code>$mget()</code>, the keys will be converted to UTF-8 before they
are fetched.</p>
<p><code>fastmap</code> objects have the following methods:</p>
<dl><dt><code>set(key, value)</code></dt>
<dd><p>Set a key-value pair. <code>key</code> must be a string. Returns <code>value</code>.</p></dd>

<dt><code>mset(..., .list = NULL)</code></dt>
<dd><p>Set multiple key-value pairs. The key-value pairs are named arguments,
and/or a list passed in as <code>.list</code>. Returns a named list where the
names are the keys, and the values are the values.</p></dd>

<dt><code>get(key, missing = missing_default)</code></dt>
<dd><p>Get a value corresponding to <code>key</code>. If the key is not in the map,
return <code>missing</code>.</p></dd>

<dt><code>mget(keys, missing = missing_default)</code></dt>
<dd><p>Get values corresponding to <code>keys</code>, which is a character vector. The
values will be returned in a named list where the names are the same as
the <code>keys</code> passed in, in the same order. For keys not in the map,
they will have <code>missing</code> for their value.</p></dd>

<dt><code>has(keys)</code></dt>
<dd><p>Given a vector of keys, returns a logical vector reporting whether each
key is contained in the map.</p></dd>

<dt><code>remove(keys)</code></dt>
<dd><p>Given a vector of keys, remove the key-value pairs from the map. Returns
a logical vector reporting whether each item existed in (and was removed
from) the map.</p></dd>

<dt><code>keys(sort = FALSE)</code></dt>
<dd><p>Returns a character vector of all the keys. By default, the keys will be
in arbitrary order. Note that the order can vary across platforms and is
not guaranteed to be consistent. With <code>sort=TRUE</code>, the keys will be
sorted according to their Unicode code point values.</p></dd>

<dt><code>size()</code></dt>
<dd><p>Returns the number of items in the map.</p></dd>

<dt><code>clone()</code></dt>
<dd><p>Returns a copy of the fastmap object. This is a shallow clone; objects in
the fastmap will not be copied.</p></dd>

<dt><code>as_list(sort = FALSE)</code></dt>
<dd><p>Return a named list where the names are the keys from the map, and the
values are the values. By default, the keys will be in arbitrary order.
Note that the order can vary across platforms and is not guaranteed to
be consistent. With <code>sort=TRUE</code>, the keys will be sorted according
to their Unicode code point values.</p></dd>

<dt><code>reset()</code></dt>
<dd><p>Reset the fastmap object, clearing all items.</p></dd>


</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create the fastmap object</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">fastmap</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set some key-value pairs</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="st">"letters"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">mset</span><span class="op">(</span>numbers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, nothing <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get values using keys</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 100</span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"numbers"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10 20 30</span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">mget</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"letters"</span>, <span class="st">"numbers"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $letters</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "a" "b" "c"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $numbers</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10 20 30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Missing keys return NULL by default, but this can be customized</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"xyz"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check for existence of keys</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">has</span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">has</span><span class="op">(</span><span class="st">"nothing"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">has</span><span class="op">(</span><span class="st">"xyz"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove one or more items</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">remove</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"letters"</span>, <span class="st">"x"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Return number of items</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">size</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get all keys</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">keys</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "nothing" "numbers"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Return named list that represents all key-value pairs</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">m</span><span class="op">$</span><span class="fu">as_list</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ nothing: NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ numbers: num [1:3] 10 20 30</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Clear the map</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">reset</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specify missing value when get() is called</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">fastmap</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"x"</span>, missing <span class="op">=</span> <span class="fu"><a href="key_missing.html">key_missing</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;Key Missing&gt;</span>
<span class="r-in"><span><span class="co">#&gt; &lt;Key Missing&gt;</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specify the default missing value</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">fastmap</span><span class="op">(</span>missing_default <span class="op">=</span> <span class="fu"><a href="key_missing.html">key_missing</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;Key Missing&gt;</span>
<span class="r-in"><span><span class="co">#&gt; &lt;Key Missing&gt;</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Winston Chang, RStudio.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

